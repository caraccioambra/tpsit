<HTML>
<HEAD>
   <TITLE>test7</TITLE>
</HEAD>
<style type="text/css">
   .miediv {
      position: absolute;
      height: 50px;
      width: 50px;
      border-width: 1px;
      border: solid black;
      top: 20px;
      text-align: center;
      color: black;
   }
</style>

<!-- Corpo della pagina HTML, chiama la funzione 'inizia()' quando la pagina è caricata -->

<BODY onLoad="inizia()">

   <DIV name='A' class='miediv'></DIV>
   <DIV name='A' class='miediv'></DIV>
   <DIV name='A' class='miediv'></DIV>
   <DIV name='A' class='miediv'></DIV>
   <DIV name='A' class='miediv'></DIV>
   <DIV name='A' class='miediv'></DIV>

   <SCRIPT Language='JavaScript'>
      function inizia() {
         // Recupera tutti gli elementi con il nome 'A'
         var a = document.getElementsByName('A');
         // Imposta lo sfondo e la posizione orizzontale dei box
         for (i = 0; i < a.length; i++) {
            a[i].style.backgroundColor = 'rgb(255,255,255)';
            a[i].style.left = (i * 60) + 10;
         }

         // Crea un array 'b' e lo riempie con valori iniziali di 255
         var b = new Array();
         for (i = 0; i < a.length; i++) {
            b[i] = 255;
         }

         // Avvia un intervallo di tempo che esegue una funzione ogni 100 millisecondi
         setInterval(function () {
            // Genera un numero casuale tra 0 e la lunghezza degli elementi 'A'
            pos = parseInt(Math.random() * a.length);

            // Se il valore corrispondente nell'array 'b', per la posizione 'pos', è maggiore di 0
            if (b[pos] > 0) {
               // Decrementa il valore in 'b[pos]' di 5
               b[pos] = b[pos] - 5;
               // Imposta il colore di sfondo del box corrispondente
               a[pos].style.backgroundColor = 'rgb(' + b[pos] + ',' + b[pos] + ',255)';
               // Aggiorna il contenuto del box
               a[pos].innerHTML = b[pos];
               // Se il valore in 'b[pos]' è inferiore a 120, imposta il colore del testo a bianco
               if (b[pos] < 120)
                  a[pos].style.color = 'white';
            }
            else {
               // Se il valore in 'b[pos]' è minore o uguale a 0, nasconde il box corrispondente
               a[pos].style.display = 'none';
            }
         }, 100);
      }
   </SCRIPT>
</BODY>
</HTML>
